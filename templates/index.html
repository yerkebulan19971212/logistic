{% extends 'base.html' %}

{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <div class="ftco-blocks-cover-1">
      <div class="ftco-cover-1 overlay" style="background-image: url('/static/images/hero_1.jpg')">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-5">
              <div class="feature-car-rent-box-1">
                <h3>{{ car.mark}}</h3>
                <ul class="list-unstyled">
                  <li>
                    <span>Цвет</span>

                    <span class="spec" style="background-color: {{ car.color }}; width: 40px; height: 40px; border-radius: 20px;"></span>
                  </li>
                  <li>
                    <span>Номер</span>
                    <span class="spec">{{ car.number }}</span>
                  </li>
{#                  <li>#}
{#                    <span>Lugage</span>#}
{#                    <span class="spec">2 Suitcase/2 Bags</span>#}
{#                  </li>#}
{#                  <li>#}
{#                    <span>Transmission</span>#}
{#                    <span class="spec">Automatic</span>#}
{#                  </li>#}
{#                  <li>#}
{#                    <span>Minium age</span>#}
{#                    <span class="spec">Automatic</span>#}
{#                  </li>#}
                </ul>
                <div class="d-flex align-items-center bg-light p-3">
                  <span>$150/күніне</span>
                  <a id="toCaruber" type="button" href="#" class="ml-auto btn btn-primary">Қазір жалға алыңыз</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="caruber" class="site-section pt-0 pb-0 bg-light">
      <div class="container">
        <div class="row">
          <div class="col-12">

              <form class="trip-form" method="POST" action="{% url 'create_order' %}">
                  {% csrf_token %}
                <div class="row align-items-center mb-4">
                  <div class="col-md-6">
                     <div style="background-color: lightseagreen">
                      {% for message in messages %}
                        {{ message }}
                      {% endfor %}
                     </div>

                    <h3 class="m-0">Тапсырыс қабылдау формасы</h3>
                  </div>
                  <div class="col-md-6 text-md-right">
                    <span class="text-primary">{{ car_count }}</span> <span> машина бос</span></span>
                  </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-3">
                    <label for="cf-3"></label>
                      <select class="form-control" id="exampleFormControlSelect1" name="city_type" id="" required>
                          <option value="0">Қалалар арасында</option>
                          <option value="1">Қала ішінде</option>
                      </select>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="cf-1">Қайдан</label>
                    <input type="text" id="cf-1" name="from" placeholder="Адресіңізді енгізңіз" class="form-control"  required>
                  </div>
                  <div class="form-group col-md-4">
                    <label for="cf-2">Қайда барасыз</label>
                    <input type="text" id="cf-2" name="to" placeholder="Қайда баратыныңызды енгізңіз" class="form-control" required>
                  </div>
                  <div class="form-group col-md-3">
                    <label for="cf-3">Басталатын күн</label>
                    <input type="datetime-local" id="cf-6" name="date" class="form-control datepicker px-3" required>
                  </div>
                  <div class="form-group col-md-3">
                    <label for="cf-3">Аяқталатын күн</label>
                    <input type="datetime-local" id="cf-5" name="date_to" class="form-control datepicker px-3" required>
                  </div>
                  <div class="form-group col-md-3">
                    <label for="cf-3">Email</label>
                    <input type="email" id="cf-4" name="email" placeholder="email" class="form-control datepicker px-3" required>
                  </div>

                  <div class="form-group col-md-3">
                    <label for="cf-3">Сервитің типі</label>
                      <select class="form-control" id="exampleFormControlSelect2" name="type" id="">
                          <option value="0">Такси</option>
                          <option value="1">Доставка</option>
                      </select>
                  </div>

                    <div class="form-group col-md-3">
                    <label for="cf-3">Цена</label>
                    <input type="hidden" id="cf-price2" name="prices"  placeholder="0" class="form-control datepicker px-3" value="0" required>
                    <input type="text" id="cf-price1" name="" disabled placeholder="0 тг" class="form-control datepicker px-3" required>
                  </div>

                </div>
                <div class="row">
                  <div class="col-lg-6">
                      <button type="button" id="priceKnow" class="btn btn-primary">Бағасын білу</button>
                    <input type="submit" id="priceKnow2"  value="Жіберу" class="btn btn-primary">
                  </div>
                </div>
              </form>
            </div>
        </div>
      </div>
    </div>

    <div class="site-section bg-light">
      <div class="container">

      </div>
    </div>

    <div class="site-section section-3" style="background-image: url('/static/images/hero_2.jpg');">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center mb-5">
            <h2 class="text-white">Біздің қызметтер</h2>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-5">
            <div class="service-1">
              <span class="service-1-icon">
                <span class="flaticon-car-1"></span>
              </span>
              <div class="service-1-contents">
                <h3>Доставка</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Obcaecati, laboriosam.</p>
              </div>
            </div>
          </div>
          <div class="col-lg-2">
          </div>
          <div class="col-lg-5">
            <div class="service-1">
              <span class="service-1-icon">
                <span class="flaticon-valet"></span>
              </span>
              <div class="service-1-contents">
                <h3>Такси</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Obcaecati, laboriosam.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container site-section mb-5">
      <div class="row justify-content-center text-center">
        <div class="col-7 text-center mb-5">
          <h2>Бұл қалай жұмыс істейді</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nemo assumenda, dolorum necessitatibus eius earum voluptates sed!</p>
        </div>
      </div>
      <div class="how-it-works d-flex">
        <div class="step">
          <span class="number"><span>01</span></span>
          <span class="caption">Уақыт жане мекен-жай</span>
        </div>
        <div class="step">
          <span class="number"><span>02</span></span>
          <span class="caption">Машина</span>
        </div>
        <div class="step">
          <span class="number"><span>03</span></span>
          <span class="caption">Керекті данныйлар</span>
        </div>
        <div class="step">
          <span class="number"><span>04</span></span>
          <span class="caption">Тексеру</span>
        </div>
        <div class="step">
          <span class="number"><span>05</span></span>
          <span class="caption">Тапсырыныз орындалды</span>
        </div>

      </div>
    </div>
    <script>
     $("#toCaruber").click(function() {
            $([document.documentElement, document.body]).animate({
                scrollTop: $("#caruber").offset().top -100
            }, 2000);
        });
     $('#priceKnow').click(function() {
         var max = 0;
         var price = 0;
         var addressTo = document.getElementById('cf-2').value
         var addressFrom = document.getElementById('cf-1').value
         var addressDate_2= document.getElementById('cf-5').value
         var addressDate_1 = document.getElementById('cf-6').value
         var addressEmail = document.getElementById('cf-4').value
         var select_city = document.getElementById('exampleFormControlSelect1').value
         var select_type = document.getElementById('exampleFormControlSelect2').value
         var date_1 = new Date(addressDate_1)
         var date_2 = new Date(addressDate_2)
         var Difference_In_Time = date_2.getTime() - date_1.getTime();
         var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);
         console.log(Difference_In_Days)


         if ( select_type == 0) max += 400
         else max += 600

         if(select_city == 1) {
             max += 0
         }
         else {
             max += 2000
         }

        var price = Difference_In_Days * max
         if (Difference_In_Days == 0) price = max
        if (addressTo === '' || addressDate_1 === '' || addressDate_2 === '' || addressFrom ==='' || addressEmail === '' ){
             alert('Барлық поляларды толтырыңыз' )
         }else{
            document.getElementById('cf-price1').value = price + " тг";
            document.getElementById('cf-price2').value = price;
        }
     })


      $('#priceKnow2').click(function() {
         var max = 0;
         var price = 0;
         var addressTo = document.getElementById('cf-2').value
         var addressFrom = document.getElementById('cf-1').value
         var addressDate_2= document.getElementById('cf-5').value
         var addressDate_1 = document.getElementById('cf-6').value
         var addressEmail = document.getElementById('cf-4').value
         var select_city = document.getElementById('exampleFormControlSelect1').value
         var select_type = document.getElementById('exampleFormControlSelect2').value
         var date_1 = new Date(addressDate_1)
         var date_2 = new Date(addressDate_2)
         var Difference_In_Time = date_2.getTime() - date_1.getTime();
         var Difference_In_Days = Difference_In_Time / (1000 * 3600 * 24);
         console.log(Difference_In_Days)


         if ( select_type == 0) max += 400
         else max += 600

         if(select_city == 1) {
             max += 0
         }
         else {
             max += 2000
         }

        var price = Difference_In_Days * max
         if (Difference_In_Days == 0) price = max
        if (addressTo === '' || addressDate_1 === '' || addressDate_2 === '' || addressFrom ==='' || addressEmail === '' ){
             alert('Барлық поляларды толтырыңыз' )
         }else{
            document.getElementById('cf-price1').value = price + " тг";
            document.getElementById('cf-price2').value = price;
        }
     })
    </script>


{% endblock %}